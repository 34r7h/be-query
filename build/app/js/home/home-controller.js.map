{"version":3,"sources":["home/home-controller.es6"],"names":[],"mappings":"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","file":"home/home-controller.js","sourcesContent":["(function () {\n\t'use strict';\n\n\tclass HomeCtrl {\n\t\tconstructor($http, $sce, Data) {\n\t\t\tlet vm = this;\n\t\t\tvm.db = Data;\n\t\t\tvm.data = {};\n\t\t\tvm.trustSrc = function (src) {\n\t\t\t\tconsole.log('trust src', src);\n\t\t\t\treturn $sce.trustAsResourceUrl(src);\n\t\t\t};\n\t\t\tfunction browserQuery(query, band) {\n\t\t\t\tvar parsedResult = {};\n\t\t\t\tvar context = {};\n\t\t\t\tcontext.data = {};\n\n\t\t\t\t// context.data.key = 'AIzaSyAPQoU5zkFq3_sP3fB-v_V-mUhTspAU1bc';\n\n\n\t\t\t\tcontext.data.key = 'AIzaSyBL3VFlBRvdgmTeTQ_yr_E76RtNrtJn--k';\n\t\t\t\tcontext.data.cx = encodeURIComponent('009026615269609811859:gj09_ghhxea');\n\n\n\t\t\t\tvar baseUrl = 'https://www.googleapis.com/customsearch/v1';\n\t\t\t\t// var query = context.data.query;\n\t\t\t\tvar queryDebug = '&q=location:new%20york%20city daterange:2457403-2457433 %22Aventura%20%26%20Romeo%20Santos%22 %22bowery%20ballroom%22';\n\t\t\t\tvar auth = '?key=' + context.data.key + '&cx=' + context.data.cx;\n\t\t\t\tvar authQuery = auth + '&q=' + query;\n\t\t\t\tvar authQueryDebug = auth + queryDebug;\n\t\t\t\t// console.log(query);\n\t\t\t\tvar links = [];\n\t\t\t\tvar req = {\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\turl: baseUrl + authQuery,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Accept': 'application/json',\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t}\n\t\t\t\t\t// data: { query: bands[z] && venues[y] && locations[x] ? query : 'something missing' }\n\t\t\t\t};\n\t\t\t\t$http(req).then(function (success) {\n\t\t\t\t\tconsole.log(success);\n\t\t\t\t\tvm.data[band] ? null : vm.data[band] = [];\n\t\t\t\t\tvm.data[band].push(success.data);\n\t\t\t\t}, function (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvm.ctrlName = 'HomeCtrl';\n\t\t\tDate.prototype.getJulian = function () {\n\t\t\t\treturn Math.floor(this / 86400000 - this.getTimezoneOffset() / 1440 + 2440587.5);\n\t\t\t};\n\t\t\tvar locations = ['new york city'];\n\t\t\tvar venues = ['bowery ballroom', 'cake shop', 'united palace theatre'];\n\t\t\tvar bands = ['the hairs', 'Aventura & Romeo Santos'];\n\n\t\t\tvar today = new Date(); //set any date\n\t\t\tvar julian = today.getJulian();\n\t\t\t// var auth = '?key='+context.data.key+'&cx='+context.data.cx;\n\n\t\t\t//var location = 'new york city';\n\t\t\t//var band = 'Aventura & Romeo Santos';\n\t\t\t//var venue = 'United Palace Theatre';\n\t\t\tvar dateRange = 'daterange:' + (julian - 30) + '-' + julian;\n\n\t\t\tvar queries = {};\n\t\t\tfor (var x = 0; x < locations.length; x++) {\n\t\t\t\tfor (var y = 0; y < bands.length; y++) {\n\t\t\t\t\tqueries[bands[y]] = [];\n\t\t\t\t\tfor (var z = 0; z < venues.length; z++) {\n\t\t\t\t\t\t//var rawQuery = '&q=location:' + (locations[x] ? locations[x] : '') + ' ' + dateRange + ' %22' + (bands[z] ? bands[z] : '') + '%22 %22' + (venues[y] ? venues[y] : '') + '%22';\n\t\t\t\t\t\tvar rawQuery = 'location:' + (locations[x] ? locations[x] : '') + ' ' + dateRange + ' \"' + (bands[z] ? bands[z] : '') + '\" \"' + (venues[y] ? venues[y] : '') + '\"';\n\t\t\t\t\t\tvar query = encodeURIComponent(rawQuery);\n\t\t\t\t\t\tconsole.log(bands[z] && venues[y] && locations[x] ? query : 'something missing');\n\t\t\t\t\t\tbrowserQuery(query, bands[z]);\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetTimeout(function () {\n\t\t\t\tlet time = Date.now();\n\t\t\t\tvm.db.fb[time] = JSON.stringify(vm.data);\n\t\t\t\tvm.db.fb.$save();\n\t\t\t\tconsole.info(vm.db.fb);\n\t\t\t}, 10000);\n\t\t}\n\t}\n\n\t/**\n\t * @ngdoc object\n\t * @name home.controller:HomeCtrl\n\t *\n\t * @description\n\t *\n\t */\n\tangular\n\t\t.module('home')\n\t\t.controller('HomeCtrl', HomeCtrl);\n}());\n"],"sourceRoot":"/source/"}